import{j as e,m as i,r as h,L as v}from"./index-MvcxFbVf.js";import{t as y,f as T}from"./contentStorage-BxsOK-Gq.js";import{c}from"./utils-CEmwZijL.js";import{F as b}from"./file-text-CFrRMDHy.js";import{T as j}from"./tag-nz5u6ffQ.js";import{S as x}from"./star-C0F3MUTK.js";import{E as N}from"./ellipsis-Cn3YzYi7.js";import{A as g}from"./index-CuuhE5ML.js";import{c as V}from"./createLucideIcon-D8Ohv4ly.js";const A=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],D=V("trash",A),S="ContentTable-module__tableWrapper___DNwMa",H="ContentTable-module__emptyState___OyvdQ",I="ContentTable-module__emptyText___r3WiK",B="ContentTable-module__tableHeader___zbwch",L="ContentTable-module__colName___gQscy",M="ContentTable-module__colLastViewed___6FzZ-",k="ContentTable-module__colUpdated___UIc1c",P="ContentTable-module__colCreated___uxHAb",U="ContentTable-module__colActions___d4Ov1",E="ContentTable-module__tableRow___PQZaq",R="ContentTable-module__nameColumn___JpkoL",W="ContentTable-module__fileIcon___68d1I",$="ContentTable-module__fileInfo___dnWZw",F="ContentTable-module__fileName___tuX8R",Z="ContentTable-module__filePreview___hk3k9",Q="ContentTable-module__previewText___KrSfg",Y="ContentTable-module__tags___jlefG",z="ContentTable-module__tag___4mdD8",G="ContentTable-module__tagCount___pLSJE",J="ContentTable-module__dateColumn___xxxCe",K="ContentTable-module__actionsColumn___ZGv7e",O="ContentTable-module__starButton___d6yy0",q="ContentTable-module__starred___-2pe8",X="ContentTable-module__moreButton___dwQAb",ee="ContentTable-module__actionsMenu___Vxcef",te="ContentTable-module__menuButton___3ePZI",t={tableWrapper:S,emptyState:H,emptyText:I,tableHeader:B,colName:L,colLastViewed:M,colUpdated:k,colCreated:P,colActions:U,tableRow:E,nameColumn:R,fileIcon:W,fileInfo:$,fileName:F,filePreview:Z,previewText:Q,tags:Y,tag:z,tagCount:G,dateColumn:J,actionsColumn:K,starButton:O,starred:q,moreButton:X,actionsMenu:ee,menuButton:te,delete:"ContentTable-module__delete___xr3fr"};function ue({content:a,emptyMessage:s="Any documents you haven't moved into a specific folder will appear here."}){if(a.length===0)return e.jsx(i.div,{className:t.emptyState,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:e.jsx("p",{className:t.emptyText,children:s})});const r=[...a].sort((n,o)=>n.lastViewed&&o.lastViewed?o.lastViewed-n.lastViewed:n.lastViewed?-1:o.lastViewed?1:o.updatedAt-n.updatedAt);return e.jsxs("div",{className:t.tableWrapper,children:[e.jsxs(i.div,{className:t.tableHeader,initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx("div",{className:t.colName,children:"Name"}),e.jsx("div",{className:t.colLastViewed,children:"Last Viewed"}),e.jsx("div",{className:t.colUpdated,children:"Updated"}),e.jsx("div",{className:t.colCreated,children:"Created"}),e.jsx("div",{className:t.colActions})]}),e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:.1},children:r.map((n,o)=>e.jsx(ae,{content:n,index:o},n.id))})]})}function ae({content:a,index:s}){const[r,n]=h.useState(!1),[o,d]=h.useState(!1),m=oe(a),_=a.lastViewed?u(a.lastViewed):"-",C=u(a.updatedAt),f=u(a.createdAt),p=l=>{l.preventDefault(),l.stopPropagation(),y(a.id),window.location.reload()},w=l=>{l.preventDefault(),l.stopPropagation(),window.confirm("Are you sure you want to delete this document?")&&(T(a.id),window.location.reload())};return e.jsx(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:s*.05,ease:[.22,1,.36,1]},children:e.jsxs(v,{to:"/editor",search:{id:a.id},className:t.tableRow,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsxs("div",{className:t.nameColumn,children:[e.jsx(i.div,{className:t.fileIcon,whileHover:{scale:1.05},children:e.jsx(b,{className:"h-4 w-4"})}),e.jsxs("div",{className:t.fileInfo,children:[e.jsx("div",{className:t.fileName,children:a.title||"Untitled"}),e.jsxs("div",{className:t.filePreview,children:[e.jsx("span",{className:t.previewText,children:m}),a.tags&&a.tags.length>0&&e.jsxs("div",{className:t.tags,children:[a.tags.slice(0,2).map(l=>e.jsxs(i.span,{className:t.tag,whileHover:{scale:1.05},children:[e.jsx(j,{}),l]},l)),a.tags.length>2&&e.jsxs("span",{className:t.tagCount,children:["+",a.tags.length-2]})]})]})]})]}),e.jsx("div",{className:c(t.dateColumn,t.colLastViewed),children:_}),e.jsx("div",{className:c(t.dateColumn,t.colUpdated),children:C}),e.jsx("div",{className:c(t.dateColumn,t.colCreated),children:f}),e.jsxs("div",{className:t.actionsColumn,children:[e.jsx(i.button,{onClick:p,className:c(t.starButton,a.starred&&t.starred),style:{opacity:a.starred||r?1:0},title:a.starred?"Unstar":"Star",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(x,{className:"h-3.5 w-3.5"})}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(i.button,{className:t.moreButton,style:{opacity:r?1:0},onClick:l=>{l.preventDefault(),l.stopPropagation(),d(!o)},whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(N,{className:"h-4 w-4"})}),e.jsx(g,{children:o&&e.jsxs(i.div,{className:t.actionsMenu,initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15},children:[e.jsxs(i.button,{onClick:p,className:t.menuButton,whileHover:{x:2},children:[e.jsx(x,{}),a.starred?"Unstar":"Star"]}),e.jsxs(i.button,{onClick:w,className:c(t.menuButton,t.delete),whileHover:{x:2},children:[e.jsx(D,{}),"Delete"]})]})})]})]})]})})}function oe(a){if(a.docContent)try{const s=o=>o.text?o.text:o.content?o.content.map(s).join(" "):"";return s(a.docContent).trim().slice(0,100)||"Empty document"}catch{return"Empty document"}return"No content"}function u(a){const s=new Date(a),r=new Date,n=Math.floor((r.getTime()-s.getTime())/(1e3*60*60*24));if(n===0)return"今天";if(n===1)return"昨天";if(n<7)return`${n}天前`;const o=s.getMonth()+1,d=s.getDate(),m=s.getFullYear(),_=r.getFullYear();return m===_?`${o}月${d}日`:`${m}年${o}月${d}日`}export{ue as C};
