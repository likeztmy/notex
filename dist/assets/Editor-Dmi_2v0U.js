const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BoZQxjjf.js","assets/index-MvcxFbVf.js","assets/index-DDzXKk_r.css","assets/index-ek6y0BNb.js","assets/index-BhiyyxH2.js","assets/index-DdGhST80.js","assets/index-BTfMnwZu.js","assets/index-DQ-7OsNE.js","assets/index-BBFr6lgX.js","assets/index-DLTyIk-9.js","assets/index-B6tnPBJd.js","assets/index-CQO9IYtp.js","assets/index-BmSRE6yE.js","assets/index-D1YeinnQ.js","assets/index-799VogEn.js","assets/core-C8MVj649.js","assets/tiptap-markdown.es-DzNsI1O3.js","assets/index-DklgWQrF.js"])))=>i.map(i=>d[i]);
import{j as d,r as u,p as Ie,e as Fe,u as Ze,_ as V}from"./index-MvcxFbVf.js";import{a as et,h as tt,D as Ee}from"./contentStorage-BxsOK-Gq.js";import{X as nt,e as ue,g as te,a as G,b as ot,c as rt,d as st,f as lt,h as Ae,i as it,j as Be,k as at,r as le,l as ct,m as ut,n as pe,o as F,p as U,q as z,s as Q,t as je,u as q,v as K,w as ie,x as be,y as ne,z as ae,A as ft,B as He,C as dt,D as Y,E as ye,F as we,G as Re,H as fe,I as oe,J as Ve}from"./floating-ui.utils.dom-CV9rnmvN.js";import{c as mt}from"./createLucideIcon-D8Ohv4ly.js";const ht=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],gt=mt("palette",ht);function xt({styleConfig:e,onStyleChange:t,onClose:o}){return d.jsx(d.Fragment,{children:d.jsxs("div",{className:"fixed top-0 right-0 z-50 shadow-2xl w-80 h-full overflow-y-auto",style:{animation:"slideInRight 0.3s ease-out",borderLeft:"1px solid var(--color-linear-border-primary)",background:"var(--color-linear-bg-secondary)"},children:[d.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-5 py-4",style:{background:"var(--color-linear-bg-secondary)"},children:[d.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--color-linear-text-primary)"},children:"Format"}),d.jsx("button",{onClick:o,className:"p-1 rounded-md transition-colors",style:{color:"var(--color-linear-text-secondary)"},onMouseEnter:n=>{n.currentTarget.style.background="var(--color-linear-bg-active)"},onMouseLeave:n=>{n.currentTarget.style.background="transparent"},title:"Close",children:d.jsx(nt,{className:"w-4 h-4"})})]}),d.jsxs("div",{className:"px-5 py-4 space-y-6",children:[d.jsx(ee,{label:"FONT",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx(he,{active:e.fontFamily==="sans",onClick:()=>t({fontFamily:"sans"}),label:"Aa",sublabel:"System"}),d.jsx(he,{active:e.fontFamily==="serif",onClick:()=>t({fontFamily:"serif"}),label:"Ss",sublabel:"Serif"}),d.jsx(he,{active:e.fontFamily==="mono",onClick:()=>t({fontFamily:"mono"}),label:"ØØ",sublabel:"Mono"})]})}),d.jsx(ee,{label:"CONTENT",children:d.jsx(re,{value:e.fontSize,options:[{value:"small",label:"Small"},{value:"medium",label:"Body"},{value:"large",label:"Large"}],onChange:n=>t({fontSize:n})})}),d.jsx(ee,{label:"LAYOUT",children:d.jsx("div",{className:"space-y-3",children:d.jsxs("div",{children:[d.jsx("label",{className:"text-xs mb-2 block font-medium",style:{color:"var(--color-linear-text-secondary)"},children:"Width"}),d.jsx(re,{value:e.contentWidth,options:[{value:"narrow",label:"Narrow"},{value:"medium",label:"Medium"},{value:"wide",label:"Wide"},{value:"full",label:"Full"}],onChange:n=>t({contentWidth:n})})]})})}),d.jsx(ee,{label:"SPACING",children:d.jsx("div",{className:"space-y-3",children:d.jsxs("div",{children:[d.jsx("label",{className:"text-xs mb-2 block font-medium",style:{color:"var(--color-linear-text-secondary)"},children:"Line Height"}),d.jsx(re,{value:e.lineHeight,options:[{value:"compact",label:"Compact"},{value:"normal",label:"Normal"},{value:"relaxed",label:"Relaxed"}],onChange:n=>t({lineHeight:n})})]})})}),d.jsx(ee,{label:"ALIGNMENT",children:d.jsx(re,{value:e.textAlign,options:[{value:"left",label:"Left"},{value:"justify",label:"Justify"}],onChange:n=>t({textAlign:n})})})]})]})})}function ee({label:e,children:t}){return d.jsxs("div",{className:"space-y-2.5",children:[d.jsx("label",{className:"text-xs font-semibold tracking-wider",style:{color:"var(--color-linear-text-secondary)"},children:e}),t]})}function he({active:e,onClick:t,label:o,sublabel:n}){return d.jsxs("button",{onClick:t,className:"flex-1 flex flex-col items-center justify-center py-4 rounded-xl transition-all",style:{background:"var(--color-linear-bg-tertiary)",border:e?"2px solid var(--color-linear-accent-primary)":"2px solid transparent"},children:[d.jsx("div",{className:"text-2xl font-semibold mb-1",style:{color:"var(--color-linear-text-primary)",fontFamily:n==="Serif"?"Georgia, serif":n==="Mono"?"ui-monospace, monospace":"system-ui, -apple-system"},children:o}),d.jsx("div",{className:"text-xs font-medium",style:{color:"var(--color-linear-text-secondary)"},children:n})]})}function re({value:e,options:t,onChange:o}){return d.jsx("div",{className:"flex rounded-xl p-1",style:{background:"var(--color-linear-bg-tertiary)"},children:t.map(n=>d.jsx("button",{onClick:()=>o(n.value),className:"flex-1 px-3 py-2 text-sm rounded-lg transition-all font-medium",style:{background:e===n.value?"var(--color-linear-bg-elevated)":"transparent",color:"var(--color-linear-text-primary)",boxShadow:e===n.value?"var(--shadow-linear-sm)":"none"},children:n.label},n.value))})}function pt(e){const t={},o={sans:"var(--editor-font-sans)",serif:"var(--editor-font-serif)",mono:"var(--editor-font-mono)"};t["--editor-font-family"]=o[e.fontFamily];const n={small:"var(--editor-font-size-small)",medium:"var(--editor-font-size-medium)",large:"var(--editor-font-size-large)"};t["--editor-font-size"]=n[e.fontSize];const r={compact:"var(--editor-line-height-compact)",normal:"var(--editor-line-height-normal)",relaxed:"var(--editor-line-height-relaxed)"};t["--editor-line-height"]=r[e.lineHeight];const s={left:"left",justify:"justify"};return t["--editor-text-align"]=s[e.textAlign],t}function yt(e){return{narrow:"max-w-2xl",medium:"max-w-3xl",wide:"max-w-4xl",full:"max-w-full"}[e]}const vt=[{title:"Text",description:"Just start typing with plain text",icon:"T",category:"Basic Blocks",shortcut:"txt",run:e=>e.chain().focus().setParagraph().run()},{title:"Heading 1",description:"Big section heading",icon:"H1",category:"Headings",shortcut:"h1",run:e=>e.chain().focus().toggleHeading({level:1}).run()},{title:"Heading 2",description:"Medium section heading",icon:"H2",category:"Headings",shortcut:"h2",run:e=>e.chain().focus().toggleHeading({level:2}).run()},{title:"Heading 3",description:"Small section heading",icon:"H3",category:"Headings",shortcut:"h3",run:e=>e.chain().focus().toggleHeading({level:3}).run()},{title:"Bullet List",description:"Create a simple bullet list",icon:"•",category:"Lists",shortcut:"ul",run:e=>e.chain().focus().toggleBulletList().run()},{title:"Numbered List",description:"Create a list with numbering",icon:"1.",category:"Lists",shortcut:"ol",run:e=>e.chain().focus().toggleOrderedList().run()},{title:"Task List",description:"Track tasks with a checklist",icon:"✓",category:"Lists",shortcut:"todo",run:e=>e.chain().focus().toggleTaskList().run()},{title:"Code Block",description:"Capture a code snippet",icon:"</>",category:"Advanced",shortcut:"code",run:e=>e.chain().focus().toggleCodeBlock().run()},{title:"Quote",description:"Capture a quote",icon:'"',category:"Basic Blocks",shortcut:"quote",run:e=>e.chain().focus().toggleBlockquote().run()},{title:"Divider",description:"Visually divide blocks",icon:"—",category:"Basic Blocks",shortcut:"hr",run:e=>e.chain().focus().setHorizontalRule().run()}];function bt(e,t){return vt.map(o=>({...o,command:()=>{const{state:n}=e.view,{selection:r}=n,{$from:s}=r,l=s.parent.textContent||"",i=s.parentOffset,c=l.lastIndexOf("/",i);if(c!==-1){const f=s.start()+c,m=s.start()+i;e.chain().focus().deleteRange({from:f,to:m}).run()}t(),o.run(e)}}))}function wt(e,t){if(!t.trim())return e;const o=t.toLowerCase();return e.filter(n=>n.title.toLowerCase().includes(o)||n.description.toLowerCase().includes(o)||n.shortcut.toLowerCase().includes(o))}var Rt=typeof document<"u",Ct=function(){},ve=Rt?u.useLayoutEffect:Ct;const St={...Ie},kt=St.useInsertionEffect,_t=kt||(e=>e());function Et(e){const t=u.useRef(()=>{});return _t(()=>{t.current=e}),u.useCallback(function(){for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return t.current==null?void 0:t.current(...n)},[])}function Me(e,t,o){let{reference:n,floating:r}=e;const s=G(t),l=it(t),i=ut(l),c=te(t),f=s==="y",m=n.x+n.width/2-r.width/2,h=n.y+n.height/2-r.height/2,g=n[i]/2-r[i]/2;let a;switch(c){case"top":a={x:m,y:n.y-r.height};break;case"bottom":a={x:m,y:n.y+n.height};break;case"right":a={x:n.x+n.width,y:h};break;case"left":a={x:n.x-r.width,y:h};break;default:a={x:n.x,y:n.y}}switch(Be(t)){case"start":a[l]-=g*(o&&f?-1:1);break;case"end":a[l]+=g*(o&&f?-1:1);break}return a}async function At(e,t){var o;t===void 0&&(t={});const{x:n,y:r,platform:s,rects:l,elements:i,strategy:c}=e,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:h="floating",altBoundary:g=!1,padding:a=0}=ue(t,e),x=at(a),b=i[g?h==="floating"?"reference":"floating":h],y=le(await s.getClippingRect({element:(o=await(s.isElement==null?void 0:s.isElement(b)))==null||o?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(i.floating)),boundary:f,rootBoundary:m,strategy:c})),R=h==="floating"?{x:n,y:r,width:l.floating.width,height:l.floating.height}:l.reference,p=await(s.getOffsetParent==null?void 0:s.getOffsetParent(i.floating)),v=await(s.isElement==null?void 0:s.isElement(p))?await(s.getScale==null?void 0:s.getScale(p))||{x:1,y:1}:{x:1,y:1},k=le(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:R,offsetParent:p,strategy:c}):R);return{top:(y.top-k.top+x.top)/v.y,bottom:(k.bottom-y.bottom+x.bottom)/v.y,left:(y.left-k.left+x.left)/v.x,right:(k.right-y.right+x.right)/v.x}}const jt=async(e,t,o)=>{const{placement:n="bottom",strategy:r="absolute",middleware:s=[],platform:l}=o,i=s.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(t));let f=await l.getElementRects({reference:e,floating:t,strategy:r}),{x:m,y:h}=Me(f,n,c),g=n,a={},x=0;for(let b=0;b<i.length;b++){var w;const{name:y,fn:R}=i[b],{x:p,y:v,data:k,reset:S}=await R({x:m,y:h,initialPlacement:n,placement:g,strategy:r,middlewareData:a,rects:f,platform:{...l,detectOverflow:(w=l.detectOverflow)!=null?w:At},elements:{reference:e,floating:t}});m=p??m,h=v??h,a={...a,[y]:{...a[y],...k}},S&&x<=50&&(x++,typeof S=="object"&&(S.placement&&(g=S.placement),S.rects&&(f=S.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:r}):S.rects),{x:m,y:h}=Me(f,g,c)),b=-1)}return{x:m,y:h,placement:g,strategy:r,middlewareData:a}},Mt=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var o,n;const{placement:r,middlewareData:s,rects:l,initialPlacement:i,platform:c,elements:f}=t,{mainAxis:m=!0,crossAxis:h=!0,fallbackPlacements:g,fallbackStrategy:a="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:w=!0,...b}=ue(e,t);if((o=s.arrow)!=null&&o.alignmentOffset)return{};const y=te(r),R=G(i),p=te(i)===i,v=await(c.isRTL==null?void 0:c.isRTL(f.floating)),k=g||(p||!w?[ot(i)]:rt(i)),S=x!=="none";!g&&S&&k.push(...st(i,w,x,v));const j=[i,...k],M=await c.detectOverflow(t,b),A=[];let P=((n=s.flip)==null?void 0:n.overflows)||[];if(m&&A.push(M[y]),h){const D=lt(r,l,v);A.push(M[D[0]],M[D[1]])}if(P=[...P,{placement:r,overflows:A}],!A.every(D=>D<=0)){var N,B;const D=(((N=s.flip)==null?void 0:N.index)||0)+1,$=j[D];if($&&(!(h==="alignment"?R!==G($):!1)||P.every(_=>G(_.placement)===R?_.overflows[0]>0:!0)))return{data:{index:D,overflows:P},reset:{placement:$}};let T=(B=P.filter(C=>C.overflows[0]<=0).sort((C,_)=>C.overflows[1]-_.overflows[1])[0])==null?void 0:B.placement;if(!T)switch(a){case"bestFit":{var L;const C=(L=P.filter(_=>{if(S){const O=G(_.placement);return O===R||O==="y"}return!0}).map(_=>[_.placement,_.overflows.filter(O=>O>0).reduce((O,H)=>O+H,0)]).sort((_,O)=>_[1]-O[1])[0])==null?void 0:L[0];C&&(T=C);break}case"initialPlacement":T=i;break}if(r!==T)return{reset:{placement:T}}}return{}}}},Pt=new Set(["left","top"]);async function Lt(e,t){const{placement:o,platform:n,elements:r}=e,s=await(n.isRTL==null?void 0:n.isRTL(r.floating)),l=te(o),i=Be(o),c=G(o)==="y",f=Pt.has(l)?-1:1,m=s&&c?-1:1,h=ue(t,e);let{mainAxis:g,crossAxis:a,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return i&&typeof x=="number"&&(a=i==="end"?x*-1:x),c?{x:a*m,y:g*f}:{x:g*f,y:a*m}}const Ot=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var o,n;const{x:r,y:s,placement:l,middlewareData:i}=t,c=await Lt(t,e);return l===((o=i.offset)==null?void 0:o.placement)&&(n=i.arrow)!=null&&n.alignmentOffset?{}:{x:r+c.x,y:s+c.y,data:{...c,placement:l}}}}},Tt=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:o,y:n,placement:r,platform:s}=t,{mainAxis:l=!0,crossAxis:i=!1,limiter:c={fn:y=>{let{x:R,y:p}=y;return{x:R,y:p}}},...f}=ue(e,t),m={x:o,y:n},h=await s.detectOverflow(t,f),g=G(te(r)),a=ct(g);let x=m[a],w=m[g];if(l){const y=a==="y"?"top":"left",R=a==="y"?"bottom":"right",p=x+h[y],v=x-h[R];x=Ae(p,x,v)}if(i){const y=g==="y"?"top":"left",R=g==="y"?"bottom":"right",p=w+h[y],v=w-h[R];w=Ae(p,w,v)}const b=c.fn({...t,[a]:x,[g]:w});return{...b,data:{x:b.x-o,y:b.y-n,enabled:{[a]:l,[g]:i}}}}}};function $e(e){const t=q(e);let o=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const r=K(e),s=r?e.offsetWidth:o,l=r?e.offsetHeight:n,i=ie(o)!==s||ie(n)!==l;return i&&(o=s,n=l),{width:o,height:n,$:i}}function Ce(e){return F(e)?e:e.contextElement}function Z(e){const t=Ce(e);if(!K(t))return z(1);const o=t.getBoundingClientRect(),{width:n,height:r,$:s}=$e(t);let l=(s?ie(o.width):o.width)/n,i=(s?ie(o.height):o.height)/r;return(!l||!Number.isFinite(l))&&(l=1),(!i||!Number.isFinite(i))&&(i=1),{x:l,y:i}}const Nt=z(0);function We(e){const t=Q(e);return!Ve()||!t.visualViewport?Nt:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Dt(e,t,o){return t===void 0&&(t=!1),!o||t&&o!==Q(e)?!1:t}function J(e,t,o,n){t===void 0&&(t=!1),o===void 0&&(o=!1);const r=e.getBoundingClientRect(),s=Ce(e);let l=z(1);t&&(n?F(n)&&(l=Z(n)):l=Z(e));const i=Dt(s,o,n)?We(s):z(0);let c=(r.left+i.x)/l.x,f=(r.top+i.y)/l.y,m=r.width/l.x,h=r.height/l.y;if(s){const g=Q(s),a=n&&F(n)?Q(n):n;let x=g,w=je(x);for(;w&&n&&a!==x;){const b=Z(w),y=w.getBoundingClientRect(),R=q(w),p=y.left+(w.clientLeft+parseFloat(R.paddingLeft))*b.x,v=y.top+(w.clientTop+parseFloat(R.paddingTop))*b.y;c*=b.x,f*=b.y,m*=b.x,h*=b.y,c+=p,f+=v,x=Q(w),w=je(x)}}return le({width:m,height:h,x:c,y:f})}function de(e,t){const o=fe(e).scrollLeft;return t?t.left+o:J(U(e)).left+o}function ze(e,t){const o=e.getBoundingClientRect(),n=o.left+t.scrollLeft-de(e,o),r=o.top+t.scrollTop;return{x:n,y:r}}function It(e){let{elements:t,rect:o,offsetParent:n,strategy:r}=e;const s=r==="fixed",l=U(n),i=t?be(t.floating):!1;if(n===l||i&&s)return o;let c={scrollLeft:0,scrollTop:0},f=z(1);const m=z(0),h=K(n);if((h||!h&&!s)&&((we(n)!=="body"||Re(l))&&(c=fe(n)),K(n))){const a=J(n);f=Z(n),m.x=a.x+n.clientLeft,m.y=a.y+n.clientTop}const g=l&&!h&&!s?ze(l,c):z(0);return{width:o.width*f.x,height:o.height*f.y,x:o.x*f.x-c.scrollLeft*f.x+m.x+g.x,y:o.y*f.y-c.scrollTop*f.y+m.y+g.y}}function Ft(e){return Array.from(e.getClientRects())}function Bt(e){const t=U(e),o=fe(e),n=e.ownerDocument.body,r=Y(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=Y(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let l=-o.scrollLeft+de(e);const i=-o.scrollTop;return q(n).direction==="rtl"&&(l+=Y(t.clientWidth,n.clientWidth)-r),{width:r,height:s,x:l,y:i}}const Pe=25;function Ht(e,t){const o=Q(e),n=U(e),r=o.visualViewport;let s=n.clientWidth,l=n.clientHeight,i=0,c=0;if(r){s=r.width,l=r.height;const m=Ve();(!m||m&&t==="fixed")&&(i=r.offsetLeft,c=r.offsetTop)}const f=de(n);if(f<=0){const m=n.ownerDocument,h=m.body,g=getComputedStyle(h),a=m.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,x=Math.abs(n.clientWidth-h.clientWidth-a);x<=Pe&&(s-=x)}else f<=Pe&&(s+=f);return{width:s,height:l,x:i,y:c}}const Vt=new Set(["absolute","fixed"]);function $t(e,t){const o=J(e,!0,t==="fixed"),n=o.top+e.clientTop,r=o.left+e.clientLeft,s=K(e)?Z(e):z(1),l=e.clientWidth*s.x,i=e.clientHeight*s.y,c=r*s.x,f=n*s.y;return{width:l,height:i,x:c,y:f}}function Le(e,t,o){let n;if(t==="viewport")n=Ht(e,o);else if(t==="document")n=Bt(U(e));else if(F(t))n=$t(t,o);else{const r=We(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return le(n)}function qe(e,t){const o=ne(e);return o===t||!F(o)||ae(o)?!1:q(o).position==="fixed"||qe(o,t)}function Wt(e,t){const o=t.get(e);if(o)return o;let n=pe(e,[],!1).filter(i=>F(i)&&we(i)!=="body"),r=null;const s=q(e).position==="fixed";let l=s?ne(e):e;for(;F(l)&&!ae(l);){const i=q(l),c=He(l);!c&&i.position==="fixed"&&(r=null),(s?!c&&!r:!c&&i.position==="static"&&!!r&&Vt.has(r.position)||Re(l)&&!c&&qe(e,l))?n=n.filter(m=>m!==l):r=i,l=ne(l)}return t.set(e,n),n}function zt(e){let{element:t,boundary:o,rootBoundary:n,strategy:r}=e;const l=[...o==="clippingAncestors"?be(t)?[]:Wt(t,this._c):[].concat(o),n],i=l[0],c=l.reduce((f,m)=>{const h=Le(t,m,r);return f.top=Y(h.top,f.top),f.right=ye(h.right,f.right),f.bottom=ye(h.bottom,f.bottom),f.left=Y(h.left,f.left),f},Le(t,i,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function qt(e){const{width:t,height:o}=$e(e);return{width:t,height:o}}function Ut(e,t,o){const n=K(t),r=U(t),s=o==="fixed",l=J(e,!0,s,t);let i={scrollLeft:0,scrollTop:0};const c=z(0);function f(){c.x=de(r)}if(n||!n&&!s)if((we(t)!=="body"||Re(r))&&(i=fe(t)),n){const a=J(t,!0,s,t);c.x=a.x+t.clientLeft,c.y=a.y+t.clientTop}else r&&f();s&&!n&&r&&f();const m=r&&!n&&!s?ze(r,i):z(0),h=l.left+i.scrollLeft-c.x-m.x,g=l.top+i.scrollTop-c.y-m.y;return{x:h,y:g,width:l.width,height:l.height}}function ge(e){return q(e).position==="static"}function Oe(e,t){if(!K(e)||q(e).position==="fixed")return null;if(t)return t(e);let o=e.offsetParent;return U(e)===o&&(o=o.ownerDocument.body),o}function Ue(e,t){const o=Q(e);if(be(e))return o;if(!K(e)){let r=ne(e);for(;r&&!ae(r);){if(F(r)&&!ge(r))return r;r=ne(r)}return o}let n=Oe(e,t);for(;n&&ft(n)&&ge(n);)n=Oe(n,t);return n&&ae(n)&&ge(n)&&!He(n)?o:n||dt(e)||o}const Kt=async function(e){const t=this.getOffsetParent||Ue,o=this.getDimensions,n=await o(e.floating);return{reference:Ut(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Gt(e){return q(e).direction==="rtl"}const Qt={convertOffsetParentRelativeRectToViewportRelativeRect:It,getDocumentElement:U,getClippingRect:zt,getOffsetParent:Ue,getElementRects:Kt,getClientRects:Ft,getDimensions:qt,getScale:Z,isElement:F,isRTL:Gt};function Ke(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Jt(e,t){let o=null,n;const r=U(e);function s(){var i;clearTimeout(n),(i=o)==null||i.disconnect(),o=null}function l(i,c){i===void 0&&(i=!1),c===void 0&&(c=1),s();const f=e.getBoundingClientRect(),{left:m,top:h,width:g,height:a}=f;if(i||t(),!g||!a)return;const x=oe(h),w=oe(r.clientWidth-(m+g)),b=oe(r.clientHeight-(h+a)),y=oe(m),p={rootMargin:-x+"px "+-w+"px "+-b+"px "+-y+"px",threshold:Y(0,ye(1,c))||1};let v=!0;function k(S){const j=S[0].intersectionRatio;if(j!==c){if(!v)return l();j?l(!1,j):n=setTimeout(()=>{l(!1,1e-7)},1e3)}j===1&&!Ke(f,e.getBoundingClientRect())&&l(),v=!1}try{o=new IntersectionObserver(k,{...p,root:r.ownerDocument})}catch{o=new IntersectionObserver(k,p)}o.observe(e)}return l(!0),s}function Xt(e,t,o,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:i=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,f=Ce(e),m=r||s?[...f?pe(f):[],...pe(t)]:[];m.forEach(y=>{r&&y.addEventListener("scroll",o,{passive:!0}),s&&y.addEventListener("resize",o)});const h=f&&i?Jt(f,o):null;let g=-1,a=null;l&&(a=new ResizeObserver(y=>{let[R]=y;R&&R.target===f&&a&&(a.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var p;(p=a)==null||p.observe(t)})),o()}),f&&!c&&a.observe(f),a.observe(t));let x,w=c?J(e):null;c&&b();function b(){const y=J(e);w&&!Ke(w,y)&&o(),w=y,x=requestAnimationFrame(b)}return o(),()=>{var y;m.forEach(R=>{r&&R.removeEventListener("scroll",o),s&&R.removeEventListener("resize",o)}),h?.(),(y=a)==null||y.disconnect(),a=null,c&&cancelAnimationFrame(x)}}const Yt=Ot,Zt=Tt,en=Mt,tn=(e,t,o)=>{const n=new Map,r={platform:Qt,...o},s={...r.platform,_c:n};return jt(e,t,{...r,platform:s})};var nn=typeof document<"u",on=function(){},se=nn?u.useLayoutEffect:on;function ce(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let o,n,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(o=e.length,o!==t.length)return!1;for(n=o;n--!==0;)if(!ce(e[n],t[n]))return!1;return!0}if(r=Object.keys(e),o=r.length,o!==Object.keys(t).length)return!1;for(n=o;n--!==0;)if(!{}.hasOwnProperty.call(t,r[n]))return!1;for(n=o;n--!==0;){const s=r[n];if(!(s==="_owner"&&e.$$typeof)&&!ce(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Ge(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Te(e,t){const o=Ge(e);return Math.round(t*o)/o}function xe(e){const t=u.useRef(e);return se(()=>{t.current=e}),t}function rn(e){e===void 0&&(e={});const{placement:t="bottom",strategy:o="absolute",middleware:n=[],platform:r,elements:{reference:s,floating:l}={},transform:i=!0,whileElementsMounted:c,open:f}=e,[m,h]=u.useState({x:0,y:0,strategy:o,placement:t,middlewareData:{},isPositioned:!1}),[g,a]=u.useState(n);ce(g,n)||a(n);const[x,w]=u.useState(null),[b,y]=u.useState(null),R=u.useCallback(_=>{_!==S.current&&(S.current=_,w(_))},[]),p=u.useCallback(_=>{_!==j.current&&(j.current=_,y(_))},[]),v=s||x,k=l||b,S=u.useRef(null),j=u.useRef(null),M=u.useRef(m),A=c!=null,P=xe(c),N=xe(r),B=xe(f),L=u.useCallback(()=>{if(!S.current||!j.current)return;const _={placement:t,strategy:o,middleware:g};N.current&&(_.platform=N.current),tn(S.current,j.current,_).then(O=>{const H={...O,isPositioned:B.current!==!1};D.current&&!ce(M.current,H)&&(M.current=H,Fe.flushSync(()=>{h(H)}))})},[g,t,o,N,B]);se(()=>{f===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,h(_=>({..._,isPositioned:!1})))},[f]);const D=u.useRef(!1);se(()=>(D.current=!0,()=>{D.current=!1}),[]),se(()=>{if(v&&(S.current=v),k&&(j.current=k),v&&k){if(P.current)return P.current(v,k,L);L()}},[v,k,L,P,A]);const $=u.useMemo(()=>({reference:S,floating:j,setReference:R,setFloating:p}),[R,p]),T=u.useMemo(()=>({reference:v,floating:k}),[v,k]),C=u.useMemo(()=>{const _={position:o,left:0,top:0};if(!T.floating)return _;const O=Te(T.floating,m.x),H=Te(T.floating,m.y);return i?{..._,transform:"translate("+O+"px, "+H+"px)",...Ge(T.floating)>=1.5&&{willChange:"transform"}}:{position:o,left:O,top:H}},[o,i,T.floating,m.x,m.y]);return u.useMemo(()=>({...m,update:L,refs:$,elements:T,floatingStyles:C}),[m,L,$,T,C])}const sn=(e,t)=>({...Yt(e),options:[e,t]}),ln=(e,t)=>({...Zt(e),options:[e,t]}),an=(e,t)=>({...en(e),options:[e,t]}),cn={...Ie};let Ne=!1,un=0;const De=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+un++;function fn(){const[e,t]=u.useState(()=>Ne?De():void 0);return ve(()=>{e==null&&t(De())},[]),u.useEffect(()=>{Ne=!0},[]),e}const dn=cn.useId,mn=dn||fn;function hn(){const e=new Map;return{emit(t,o){var n;(n=e.get(t))==null||n.forEach(r=>r(o))},on(t,o){e.has(t)||e.set(t,new Set),e.get(t).add(o)},off(t,o){var n;(n=e.get(t))==null||n.delete(o)}}}const gn=u.createContext(null),xn=u.createContext(null),pn=()=>{var e;return((e=u.useContext(gn))==null?void 0:e.id)||null},yn=()=>u.useContext(xn);function vn(e){const{open:t=!1,onOpenChange:o,elements:n}=e,r=mn(),s=u.useRef({}),[l]=u.useState(()=>hn()),i=pn()!=null,[c,f]=u.useState(n.reference),m=Et((a,x,w)=>{s.current.openEvent=a?x:void 0,l.emit("openchange",{open:a,event:x,reason:w,nested:i}),o?.(a,x,w)}),h=u.useMemo(()=>({setPositionReference:f}),[]),g=u.useMemo(()=>({reference:c||n.reference||null,floating:n.floating||null,domReference:n.reference}),[c,n.reference,n.floating]);return u.useMemo(()=>({dataRef:s,open:t,onOpenChange:m,elements:g,events:l,floatingId:r,refs:h}),[t,m,g,l,r,h])}function bn(e){e===void 0&&(e={});const{nodeId:t}=e,o=vn({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||o,r=n.elements,[s,l]=u.useState(null),[i,c]=u.useState(null),m=r?.domReference||s,h=u.useRef(null),g=yn();ve(()=>{m&&(h.current=m)},[m]);const a=rn({...e,elements:{...r,...i&&{reference:i}}}),x=u.useCallback(p=>{const v=F(p)?{getBoundingClientRect:()=>p.getBoundingClientRect(),getClientRects:()=>p.getClientRects(),contextElement:p}:p;c(v),a.refs.setReference(v)},[a.refs]),w=u.useCallback(p=>{(F(p)||p===null)&&(h.current=p,l(p)),(F(a.refs.reference.current)||a.refs.reference.current===null||p!==null&&!F(p))&&a.refs.setReference(p)},[a.refs]),b=u.useMemo(()=>({...a.refs,setReference:w,setPositionReference:x,domReference:h}),[a.refs,w,x]),y=u.useMemo(()=>({...a.elements,domReference:m}),[a.elements,m]),R=u.useMemo(()=>({...a,...n,refs:b,elements:y,nodeId:t}),[a,b,y,t,n]);return ve(()=>{n.dataRef.current.floatingContext=R;const p=g?.nodesRef.current.find(v=>v.id===t);p&&(p.context=R)}),u.useMemo(()=>({...a,context:R,refs:b,elements:y}),[a,b,y,R])}const wn=`
.slash-menu-scroll::-webkit-scrollbar { width: 6px; }
.slash-menu-scroll::-webkit-scrollbar-track { background: transparent; }
.slash-menu-scroll::-webkit-scrollbar-thumb {
  background: var(--color-linear-border-primary);
  border-radius: 3px;
}
.slash-menu-scroll::-webkit-scrollbar-thumb:hover {
  background: var(--color-linear-text-tertiary);
}
`;function Rn({referenceElement:e,commands:t,selectedIndex:o,onSelectIndex:n,onRunCommand:r,onKeyDown:s}){const l=u.useRef([]),{refs:i,floatingStyles:c}=bn({placement:"bottom-start",strategy:"fixed",middleware:[sn(8),an({fallbackPlacements:["top-start","bottom-end","top-end"]}),ln({padding:8})],whileElementsMounted:e?Xt:void 0});if(u.useEffect(()=>(i.setPositionReference(e),()=>i.setPositionReference(null)),[e,i]),u.useEffect(()=>{l.current[o]?.scrollIntoView({behavior:"smooth",block:"nearest"})},[o]),!e)return null;const f=d.jsxs("div",{ref:i.setFloating,role:"listbox","aria-activedescendant":t[o]?`slash-item-${o}`:void 0,className:"fixed z-[100] rounded-xl overflow-hidden",style:{...c,width:280,animation:"slideUpFade 0.2s cubic-bezier(0.22, 1, 0.36, 1)",background:"var(--color-linear-bg-elevated)",border:"1px solid var(--color-linear-border-primary)",boxShadow:"var(--shadow-linear-lg)"},onKeyDown:s,children:[d.jsx("style",{children:wn}),d.jsx("div",{className:"max-h-[320px] overflow-y-auto slash-menu-scroll",children:t.length===0?d.jsx("div",{className:"px-3 py-6 text-center text-sm",style:{color:"var(--color-linear-text-tertiary)"},children:"No matches"}):d.jsx("div",{className:"py-1",children:t.map((m,h)=>d.jsx(Cn,{item:m,index:h,isSelected:h===o,itemRef:g=>{l.current[h]=g},onSelect:()=>n(h),onRun:()=>r(h)},h))})})]});return Fe.createPortal(f,document.body)}function Cn({item:e,index:t,isSelected:o,itemRef:n,onSelect:r,onRun:s}){return d.jsxs("button",{ref:n,id:`slash-item-${t}`,role:"option","aria-selected":o,type:"button",onClick:s,onMouseEnter:r,className:"w-full px-3 py-2 text-left transition-colors duration-150 flex items-center gap-2.5",style:{background:o?"var(--color-linear-bg-tertiary)":"transparent",color:"var(--color-linear-text-primary)"},children:[d.jsx("span",{className:"flex-shrink-0 w-7 h-7 flex items-center justify-center text-xs rounded-md",style:{background:o?"var(--color-linear-accent-primary)":"var(--color-linear-bg-tertiary)",color:o?"var(--color-linear-bg-elevated)":"var(--color-linear-text-primary)"},children:e.icon}),d.jsxs("span",{className:"flex-1 min-w-0",children:[d.jsx("span",{className:"text-sm font-normal block mb-0.5",children:e.title}),d.jsx("span",{className:"text-xs leading-tight block",style:{color:"var(--color-linear-text-secondary)"},children:e.description})]})]})}function Sn({editor:e}){return d.jsxs("div",{className:"flex items-center gap-1 rounded-xl shadow-lg p-1.5 backdrop-blur-sm",style:{background:"var(--color-linear-bg-elevated)",border:"1px solid var(--color-linear-border-primary)",boxShadow:"var(--shadow-linear-lg)"},children:[d.jsx("button",{onClick:()=>e.chain().focus().toggleBold().run(),className:"px-3.5 py-2 rounded-lg text-sm font-semibold transition-all duration-200 hover:scale-105",style:{background:e.isActive("bold")?"var(--color-linear-bg-tertiary)":"transparent",color:"var(--color-linear-text-primary)"},children:"B"}),d.jsx("button",{onClick:()=>e.chain().focus().toggleItalic().run(),className:"px-3.5 py-2 rounded-lg text-sm italic transition-all duration-200 hover:scale-105",style:{background:e.isActive("italic")?"var(--color-linear-bg-tertiary)":"transparent",color:"var(--color-linear-text-primary)"},children:"I"}),d.jsx("button",{onClick:()=>e.chain().focus().toggleCode().run(),className:"px-3.5 py-2 rounded-lg text-sm font-mono transition-all duration-200 hover:scale-105",style:{background:e.isActive("code")?"var(--color-linear-bg-tertiary)":"transparent",color:"var(--color-linear-text-primary)"},children:"<>"}),d.jsx("button",{onClick:()=>e.chain().focus().toggleHighlight().run(),className:"px-3.5 py-2 rounded-lg text-sm transition-all duration-200 hover:scale-105",style:{background:e.isActive("highlight")?"var(--color-linear-bg-tertiary)":"transparent",color:"var(--color-linear-text-primary)"},children:"⬛"})]})}function kn({label:e,shortcut:t}){return d.jsxs("div",{className:"flex justify-between items-center py-2",children:[d.jsx("span",{style:{color:"var(--color-linear-text-secondary)"},children:e}),d.jsx("kbd",{className:"px-2.5 py-1 rounded text-xs font-mono",style:{background:"var(--color-linear-bg-tertiary)",color:"var(--color-linear-text-secondary)"},children:t})]})}const _n=[{label:"Bold",shortcut:"⌘ B"},{label:"Italic",shortcut:"⌘ I"},{label:"Inline Code",shortcut:"⌘ E"},{label:"Heading 1",shortcut:"# + Space"},{label:"Heading 2",shortcut:"## + Space"},{label:"Heading 3",shortcut:"### + Space"},{label:"Bullet List",shortcut:"- + Space"},{label:"Numbered List",shortcut:"1. + Space"},{label:"Task List",shortcut:"[ ] + Space"},{label:"Code Block",shortcut:"``` + Space"},{label:"Blockquote",shortcut:"> + Space"},{label:"Divider",shortcut:"--- + Space"},{label:"Slash Commands",shortcut:"/ + Space"}];function En({onClose:e}){return d.jsx("div",{className:"fixed inset-0 z-20 flex items-center justify-center animate-fadeIn",style:{background:"rgba(0, 0, 0, 0.2)"},onClick:e,children:d.jsxs("div",{className:"rounded-lg p-8 max-w-md w-full mx-4",style:{background:"var(--color-linear-bg-primary)",border:"1px solid var(--color-linear-border-primary)"},onClick:t=>t.stopPropagation(),children:[d.jsx("h3",{className:"text-lg font-normal mb-6",style:{color:"var(--color-linear-text-primary)"},children:"Keyboard Shortcuts"}),d.jsx("div",{className:"space-y-3 text-sm",children:_n.map(t=>d.jsx(kn,{label:t.label,shortcut:t.shortcut},t.label))}),d.jsx("button",{onClick:e,className:"mt-6 w-full py-2.5 rounded transition-colors duration-200 text-sm",style:{background:"var(--color-linear-bg-tertiary)",color:"var(--color-linear-text-primary)"},children:"Got it"})]})})}function An(e){return{getBoundingClientRect:()=>Object.assign({width:0,height:0,x:e.left,y:e.top,top:e.top,left:e.left,right:e.left,bottom:e.top},{toJSON:()=>({})})}}function jn(){const[e,t]=u.useState(!1),[o,n]=u.useState(null),[r,s]=u.useState(""),[l,i]=u.useState(0),c=u.useRef(!1),f=u.useRef(0);u.useEffect(()=>{c.current=e,f.current=l});const m=u.useRef(t),h=u.useRef(n),g=u.useRef(i),a=u.useRef(s);u.useEffect(()=>{m.current=t,h.current=n,g.current=i,a.current=s});const x=u.useCallback(w=>(b,y)=>{const{state:R}=b,{selection:p}=R,{$from:v}=p;if(y.key==="/"&&!c.current){const k=b.coordsAtPos(v.pos);return h.current(An(k)),c.current=!0,m.current(!0),g.current(0),a.current(""),!1}if(!c.current)return!1;switch(y.key){case"ArrowDown":return y.preventDefault(),g.current(M=>M+1),!0;case"ArrowUp":return y.preventDefault(),g.current(M=>M===0?0:M-1),!0;case"Enter":return y.preventDefault(),w.onRunCommand.current?.(f.current),!0;case"Escape":y.preventDefault();const k=v.parent.textContent||"",S=v.parentOffset,j=k.lastIndexOf("/",S);if(j!==-1){const M=v.start()+j,A=v.start()+S;b.dispatch(b.state.tr.delete(M,A))}return c.current=!1,m.current(!1),a.current(""),h.current(null),!0;default:return!1}},[]);return{state:{show:e,referenceElement:o,searchQuery:r,selectedIndex:l},setShow:t,setReferenceElement:n,setSearchQuery:s,setSelectedIndex:i,getHandleKeyDown:x}}function Mn(e){const{StarterKit:t,CodeBlockLowlight:o,Typography:n,Link:r,TaskList:s,TaskItem:l,Highlight:i,Markdown:c,Placeholder:f,lowlight:m}=e;return[t.configure({codeBlock:!1,heading:{levels:[1,2,3,4,5,6]},blockquote:{HTMLAttributes:{class:"border-l-4 pl-4 italic opacity-80"}}}),o.configure({lowlight:m,HTMLAttributes:{class:"rounded-lg p-4 font-mono text-sm my-4"}}),n,r.configure({openOnClick:!1,HTMLAttributes:{class:"underline cursor-pointer"}}),s.configure({HTMLAttributes:{class:"list-none pl-0"}}),l.configure({HTMLAttributes:{class:"flex items-start gap-2 mb-2"},nested:!0}),i.configure({HTMLAttributes:{class:"bg-yellow-200 dark:bg-yellow-800 rounded px-1"}}),c.configure({html:!0,tightLists:!0,bulletListMarker:"-",linkify:!0,breaks:!1,transformPastedText:!0,transformCopiedText:!1}),f.configure({placeholder:({node:h})=>h.type.name==="heading"?`Heading ${h.attrs.level}`:'Type "/" for commands...'})]}const Pn="prose prose-lg max-w-none [&_.ProseMirror]:min-h-[70vh] [&_.ProseMirror]:p-0 [&_.ProseMirror_h1]:text-4xl [&_.ProseMirror_h1]:font-bold [&_.ProseMirror_h1]:mt-8 [&_.ProseMirror_h1]:mb-4 [&_.ProseMirror_h2]:text-3xl [&_.ProseMirror_h2]:font-semibold [&_.ProseMirror_h2]:mt-6 [&_.ProseMirror_h2]:mb-3 [&_.ProseMirror_h3]:text-2xl [&_.ProseMirror_h3]:font-semibold [&_.ProseMirror_h3]:mt-5 [&_.ProseMirror_h3]:mb-2 [&_.ProseMirror_ul]:list-disc [&_.ProseMirror_ul]:pl-6 [&_.ProseMirror_ul]:my-4 [&_.ProseMirror_ol]:list-decimal [&_.ProseMirror_ol]:pl-6 [&_.ProseMirror_ol]:my-4 [&_.ProseMirror_pre]:my-4 [&_.ProseMirror_blockquote]:my-4 [&_.ProseMirror_hr]:my-8 [&_.ProseMirror_hr]:border-t [&_.ProseMirror_hr]:opacity-20";function Ln({documentId:e,createNew:t}){const[o,n]=u.useState(null),[r,s]=u.useState(null),[l,i]=u.useState(!1),[c,f]=u.useState(!1),[m,h]=u.useState(null),g=Ze();u.useEffect(()=>{if(e){const x=et(e);x?n(x):g({to:"/content"})}else g({to:"/content"});Promise.all([V(()=>import("./index-BoZQxjjf.js"),__vite__mapDeps([0,1,2,3])),V(()=>import("./index-BhiyyxH2.js"),__vite__mapDeps([4,3,5,6,7,8])),V(()=>import("./index-DLTyIk-9.js"),__vite__mapDeps([9,8,3])),V(()=>import("./index-B6tnPBJd.js"),__vite__mapDeps([10,3])),V(()=>import("./index-BTfMnwZu.js"),__vite__mapDeps([6,3])),V(()=>import("./index-CQO9IYtp.js"),__vite__mapDeps([11,7,3])),V(()=>import("./index-BmSRE6yE.js"),__vite__mapDeps([12,7,3])),V(()=>import("./index-D1YeinnQ.js"),__vite__mapDeps([13,3])),V(()=>import("./index-799VogEn.js"),__vite__mapDeps([14,5,3,15,1,2])),V(()=>import("./tiptap-markdown.es-DzNsI1O3.js"),__vite__mapDeps([16,3,1,2])),V(()=>import("./index-DklgWQrF.js"),__vite__mapDeps([17,15,1,2]))]).then(([x,{default:w},{default:b},{default:y},{default:R},{default:p},{default:v},{default:k},{default:S},{Markdown:j},{common:M,createLowlight:A}])=>{const{useEditor:P,EditorContent:N,BubbleMenu:B}=x,L=A(M);h({useEditor:P,EditorContent:N,BubbleMenu:B,StarterKit:w,Placeholder:b,Typography:y,Link:R,TaskList:p,TaskItem:v,Highlight:k,CodeBlockLowlight:S,Markdown:j,lowlight:L})})},[e,t,g]);const a=u.useCallback((x,w)=>{tt(x,w),n(b=>b?{...b,...w,updatedAt:Date.now()}:null),s(new Date)},[]);return!m||!o?d.jsx("div",{className:"h-full flex items-center justify-center",style:{background:"white"},children:d.jsx("div",{className:"text-sm animate-pulse",style:{color:"var(--color-linear-text-tertiary)"},children:"Loading..."})}):d.jsx(On,{Editor:m,document:o,onUpdateDoc:a,showShortcuts:l,setShowShortcuts:i,showStylePanel:c,setShowStylePanel:f})}function On({Editor:{useEditor:e,EditorContent:t,BubbleMenu:o,StarterKit:n,Placeholder:r,Typography:s,Link:l,TaskList:i,TaskItem:c,Highlight:f,CodeBlockLowlight:m,Markdown:h,lowlight:g},document:a,onUpdateDoc:x,showShortcuts:w,setShowShortcuts:b,showStylePanel:y,setShowStylePanel:R}){const p=u.useRef(null),[v,k]=u.useState(a.title),[S,j]=u.useState(a.styleConfig||Ee),M=jn(),{state:A,setShow:P,setReferenceElement:N,setSearchQuery:B,setSelectedIndex:L,getHandleKeyDown:D}=M,$=u.useRef(null),T=u.useMemo(()=>({onRunCommand:$}),[]),C=e({extensions:Mn({StarterKit:n,CodeBlockLowlight:m,Typography:s,Link:l,TaskList:i,TaskItem:c,Highlight:f,Markdown:h,Placeholder:r,lowlight:g}),content:a.docContent,editorProps:{attributes:{class:"focus:outline-none min-h-[70vh]"},handleKeyDown:D(T)}});u.useEffect(()=>{C&&(k(a.title),j(a.styleConfig||Ee),C.commands.setContent(a.docContent))},[a.id,C]),u.useEffect(()=>{const E=setTimeout(()=>{v!==a.title&&x(a.id,{title:v})},500);return()=>clearTimeout(E)},[v,a.id,a.title,x]);const _=u.useCallback(E=>{const I={...S,...E};j(I),x(a.id,{styleConfig:I})},[S,a.id,x]);if(u.useEffect(()=>{p.current&&(p.current.style.height="auto",p.current.style.height=p.current.scrollHeight+"px")},[v]),u.useEffect(()=>{if(!A.show||!C)return;const E=()=>{const{state:Ye}=C.view,{$from:me}=Ye.selection,Se=me.parent.textContent||"",ke=me.parentOffset,_e=Se.lastIndexOf("/",ke);if(_e===-1)return;B(Se.substring(_e+1,ke));const X=C.view.coordsAtPos(me.pos);N({getBoundingClientRect:()=>Object.assign({width:0,height:0,x:X.left,y:X.top,top:X.top,left:X.left,right:X.left,bottom:X.top},{toJSON:()=>({})})})},I=setTimeout(()=>{C.on("update",E),setTimeout(E,50)},10);return()=>{clearTimeout(I),C.off("update",E)}},[A.show,C,B,N]),u.useEffect(()=>{if(!C)return;let E;const I=()=>{clearTimeout(E),E=setTimeout(()=>{x(a.id,{docContent:C.getJSON()})},500)};return C.on("update",I),()=>{C.off("update",I),clearTimeout(E)}},[C,a.id,x]),!C)return null;const O=u.useCallback(()=>{P(!1),N(null)},[P,N]),H=u.useMemo(()=>bt(C,O),[C,O]),W=u.useMemo(()=>wt(H,A.searchQuery),[H,A.searchQuery]);u.useEffect(()=>($.current=E=>{W[E]?.command()},()=>{$.current=null}),[W]),u.useEffect(()=>{W.length>0&&A.selectedIndex>=W.length&&L(0)},[W.length,A.selectedIndex,L]);const Qe=E=>{E.key==="ArrowDown"?(E.preventDefault(),L(I=>I>=W.length-1?0:I+1)):E.key==="ArrowUp"?(E.preventDefault(),L(I=>I===0?W.length-1:I-1)):E.key==="Enter"?(E.preventDefault(),W[A.selectedIndex]?.command()):E.key==="Escape"&&(E.preventDefault(),P(!1),B(""),N(null))},Je=yt(S.contentWidth),Xe=pt(S);return d.jsxs("div",{className:"h-full flex flex-col relative",style:{background:"white"},children:[d.jsx("button",{onClick:()=>R(!0),className:"fixed top-6 right-6 z-40 p-3 rounded-lg shadow-lg transition-all hover:scale-105",style:{background:"white",border:"1px solid var(--color-linear-border-primary)"},title:"Document Style",children:d.jsx(gt,{className:"w-5 h-5",style:{color:"var(--color-linear-text-secondary)"}})}),A.show&&C&&A.referenceElement&&d.jsx(Rn,{referenceElement:A.referenceElement,commands:W,selectedIndex:A.selectedIndex,onSelectIndex:L,onRunCommand:E=>W[E]?.command(),onKeyDown:Qe}),C&&o&&d.jsx(o,{editor:C,tippyOptions:{duration:150},children:d.jsx(Sn,{editor:C})}),w&&d.jsx(En,{onClose:()=>b(!1)}),y&&d.jsx(xt,{styleConfig:S,onStyleChange:_,onClose:()=>R(!1)}),d.jsx("div",{className:"flex-1 overflow-auto",style:Xe,children:d.jsxs("div",{className:`${Je} mx-auto px-12 pt-16 pb-32 animate-fadeInUp`,style:{animationDelay:"0.05s"},children:[d.jsx("textarea",{ref:p,value:v,onChange:E=>k(E.target.value),placeholder:"Untitled",className:"w-full resize-none border-none outline-none bg-transparent text-4xl font-semibold mb-2 leading-tight overflow-hidden",style:{color:"var(--color-linear-text-primary)",caretColor:"var(--color-linear-accent-primary)",letterSpacing:"-0.022em"},rows:1}),d.jsx("div",{className:"mb-10 text-xs",style:{color:"var(--color-linear-text-tertiary)"},children:new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}),d.jsx(t,{editor:C,className:Pn})]})})]})}function Fn({documentId:e,createNew:t}){return typeof window>"u"?d.jsx("div",{className:"h-full flex items-center justify-center",style:{background:"white"},children:d.jsx("div",{className:"text-sm animate-pulse",style:{color:"var(--color-linear-text-tertiary)"},children:"Loading notex..."})}):d.jsx(Ln,{documentId:e,createNew:t})}export{Fn as Editor};
