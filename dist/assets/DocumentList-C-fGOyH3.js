import{r as d,j as e}from"./index-MvcxFbVf.js";import{P as j,T as m}from"./ToolbarButton-BI3WYJPI.js";import{c as h}from"./createLucideIcon-D8Ohv4ly.js";import{L as g,A as w,S as N}from"./search-CmVuYEoi.js";import{A as D}from"./index-CuuhE5ML.js";import{E as b}from"./ellipsis-Cn3YzYi7.js";import"./sidebar-DUOdGS7X.js";import"./clsx-B-dksMZM.js";import"./utils-CEmwZijL.js";import"./floating-ui.utils.dom-CV9rnmvN.js";const k=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],M=h("layout-list",k);const S=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],A=h("smile",S),f="notex-documents",E=()=>{if(typeof window>"u")return[];const t=localStorage.getItem(f);if(t)try{return JSON.parse(t)}catch(s){return console.error("Failed to parse saved documents:",s),[]}return[]},L=t=>{typeof window>"u"||localStorage.setItem(f,JSON.stringify(t))};function J({onSelectDoc:t}){const[s,c]=d.useState([]);d.useEffect(()=>{c(E())},[]);const r=d.useCallback(a=>{const i=s.filter(n=>n.id!==a);c(i),L(i)},[s]),o=d.useMemo(()=>[...s].sort((a,i)=>i.updatedAt-a.updatedAt),[s]),l=d.useMemo(()=>{const a={},i=new Date;i.setHours(0,0,0,0);const n=new Date(i);return n.setDate(n.getDate()-1),o.forEach(p=>{const u=new Date(p.updatedAt);u.setHours(0,0,0,0);let x="Older";u.getTime()===i.getTime()?x="Today":u.getTime()===n.getTime()&&(x="Yesterday"),a[x]||(a[x]=[]),a[x].push(p)}),a},[o]);return e.jsxs("div",{className:"min-h-screen",style:{background:"var(--color-linear-bg-secondary)"},children:[e.jsxs(j,{title:"Unsorted",children:[e.jsx(m,{active:!0,title:"List view",children:e.jsx(M,{className:"h-4 w-4"})}),e.jsx(m,{title:"Grid view",children:e.jsx(g,{className:"h-4 w-4"})}),e.jsx(m,{title:"Sort",children:e.jsx(w,{className:"h-4 w-4"})}),e.jsx(m,{title:"Reactions",children:e.jsx(A,{className:"h-4 w-4"})}),e.jsx(m,{title:"Search",children:e.jsx(N,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"px-6",children:o.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-sm",style:{color:"var(--color-linear-text-tertiary)"},children:"Any documents you haven't moved into a specific folder will appear here."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs mb-4 text-center",style:{color:"var(--color-linear-text-tertiary)"},children:"Any documents you haven't moved into a specific folder will appear here."}),e.jsxs("div",{className:"grid grid-cols-12 gap-4 px-4 py-2 text-xs border-t border-b",style:{color:"var(--color-linear-text-tertiary)",borderColor:"var(--color-linear-border-primary)"},children:[e.jsx("div",{className:"col-span-5",children:"Name"}),e.jsx("div",{className:"col-span-2",children:"Last Viewed"}),e.jsx("div",{className:"col-span-2",children:"Updated â†“"}),e.jsx("div",{className:"col-span-2",children:"Created"}),e.jsx("div",{className:"col-span-1"})]}),e.jsx(D,{mode:"popLayout",children:Object.entries(l).map(([a,i])=>e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 text-xs font-medium",style:{color:"var(--color-linear-text-tertiary)"},children:a}),i.map(n=>e.jsx(T,{document:n,onSelect:()=>t(n.id),onDelete:()=>{window.confirm(`Delete "${n.title||"Untitled"}"?`)&&r(n.id)}},n.id))]},a))})]})})]})}function T({document:t,onSelect:s,onDelete:c}){const[r,o]=d.useState(!1);return e.jsxs("button",{onClick:s,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),className:"w-full grid grid-cols-12 gap-4 px-4 py-2.5 text-sm text-left cursor-pointer rounded transition-colors",style:{background:r?"var(--color-linear-bg-hover)":"transparent"},children:[e.jsxs("div",{className:"col-span-5 flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded bg-white flex items-center justify-center text-base",children:"ðŸ“„"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"truncate",style:{color:"var(--color-linear-text-primary)"},children:t.title||"Untitled"}),e.jsx("div",{className:"text-xs truncate mt-0.5",style:{color:"var(--color-linear-text-tertiary)"},children:C(t)})]})]}),e.jsx("div",{className:"col-span-2 flex items-center text-xs",style:{color:"var(--color-linear-text-secondary)"},children:y(t.lastViewed||t.updatedAt)}),e.jsx("div",{className:"col-span-2 flex items-center text-xs",style:{color:"var(--color-linear-text-secondary)"},children:y(t.updatedAt)}),e.jsx("div",{className:"col-span-2 flex items-center text-xs",style:{color:"var(--color-linear-text-secondary)"},children:v(t.createdAt)}),e.jsx("div",{className:"col-span-1 flex items-center justify-end",children:r&&e.jsx("button",{onClick:l=>{l.stopPropagation(),c()},className:"p-1 rounded hover:bg-opacity-80 transition-colors",style:{background:"var(--color-linear-bg-tertiary)",color:"var(--color-linear-text-secondary)"},title:"More",children:e.jsx(b,{className:"h-4 w-4"})})})]})}function C(t){if(!t.content||!t.content.content)return"Empty Document";const s=r=>r.type==="text"?r.text||"":r.content?r.content.map(o=>s(o)).join(" "):"";return s(t.content).trim()||"Empty Document"}function y(t){const c=Date.now()-t,r=Math.floor(c/(1e3*60*60));if(r<1){const l=Math.floor(c/6e4);return l<1?"åˆšåˆš":`${l}åˆ†é’Ÿå‰`}if(r<24)return`${r}å°æ—¶å‰`;const o=Math.floor(r/24);return o<7?`${o}å¤©å‰`:o<30?`${Math.floor(o/7)}å‘¨å‰`:v(t)}function v(t){return new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/")}export{J as DocumentList};
